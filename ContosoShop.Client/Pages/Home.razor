@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NavigationManager Navigation

<PageTitle>ContosoShop Support Portal</PageTitle>

<div class="container mt-4">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <!-- Welcome Hero Section -->
            <div class="text-center mb-5">
                <h1 class="display-4 mb-3">Welcome to ContosoShop Support Portal</h1>
                <p class="lead text-muted">
                    Your one-stop destination for managing orders, tracking shipments, and getting support.
                </p>
            </div>

            <!-- Quick Actions Cards -->
            <div class="row g-4 mb-5">
                <!-- View Orders Card -->
                <div class="col-md-4">
                    <div class="card h-100 border-primary">
                        <div class="card-body text-center">
                            <i class="bi bi-box-seam display-3 text-primary mb-3"></i>
                            <h5 class="card-title">View Your Orders</h5>
                            <p class="card-text text-muted">
                                Check the status of all your orders and track deliveries.
                            </p>
                            <a href="/orders" class="btn btn-primary">Go to Orders</a>
                        </div>
                    </div>
                </div>

                <!-- Return Orders Card -->
                <div class="col-md-4">
                    <div class="card h-100 border-success">
                        <div class="card-body text-center">
                            <i class="bi bi-arrow-return-left display-3 text-success mb-3"></i>
                            <h5 class="card-title">Initiate Returns</h5>
                            <p class="card-text text-muted">
                                Easily return delivered items with our streamlined return process.
                            </p>
                            <a href="/orders" class="btn btn-success">Start Return</a>
                        </div>
                    </div>
                </div>

                <!-- Contact Support Card -->
                <div class="col-md-4">
                    <div class="card h-100 border-info">
                        <div class="card-body text-center">
                            <i class="bi bi-headset display-3 text-info mb-3"></i>
                            <h5 class="card-title">Contact Support</h5>
                            <p class="card-text text-muted">
                                Need help? Our support team is here to assist you.
                            </p>
                            <a href="/support" class="btn btn-info">Get Support</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features Section -->
            <div class="card mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">What You Can Do</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6><i class="bi bi-check-circle-fill text-success me-2"></i>Order Management</h6>
                            <p class="text-muted mb-0">View complete order history with real-time status updates and detailed order information.</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6><i class="bi bi-check-circle-fill text-success me-2"></i>Easy Returns</h6>
                            <p class="text-muted mb-0">Initiate returns for delivered orders with automatic refund processing in 5-7 business days.</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6><i class="bi bi-check-circle-fill text-success me-2"></i>Order Tracking</h6>
                            <p class="text-muted mb-0">Track your shipments from processing to delivery with visual timeline updates.</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6><i class="bi bi-check-circle-fill text-success me-2"></i>24/7 Support Access</h6>
                            <p class="text-muted mb-0">Contact our support team via email or phone whenever you need assistance.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Getting Started -->
            <div class="alert alert-info" role="alert">
                <h5 class="alert-heading"><i class="bi bi-info-circle me-2"></i>Getting Started</h5>
                <p class="mb-0">
                    Click <strong>Orders</strong> in the navigation menu to view your order history, or visit 
                    <strong>Contact Support</strong> if you need immediate assistance.
                </p>
            </div>
        </div>
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (!user.Identity?.IsAuthenticated ?? true)
        {
            Navigation.NavigateTo("/login", forceLoad: true);
        }
    }
}
